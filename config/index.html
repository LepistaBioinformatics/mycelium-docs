
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../install/">
      
      
        <link rel="next" href="../downstream-apis/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Configuration - Mycelium API Gateway</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mycelium-api-gateway-configuration-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Mycelium API Gateway" class="md-header__button md-logo" aria-label="Mycelium API Gateway" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mycelium API Gateway
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/LepistaBioinformatics/mycelium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Mycelium API Gateway" class="md-nav__button md-logo" aria-label="Mycelium API Gateway" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Mycelium API Gateway
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LepistaBioinformatics/mycelium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-vault-configurations-vault-highly-recommended-for-production-environments" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vault Configurations (vault): Highly recommended for production environments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-core-configurations-core" class="md-nav__link">
    <span class="md-ellipsis">
      2. Core Configurations (core)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Core Configurations (core)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-account-lifecycle-accountlifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Account Lifecycle (accountLifeCycle)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-webhook-webhook" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Webhook (webhook)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-sql-database-adapter-settings-diesel" class="md-nav__link">
    <span class="md-ellipsis">
      3. SQL Database Adapter Settings (diesel)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-notifier-adapter-settings-smtp-and-queue" class="md-nav__link">
    <span class="md-ellipsis">
      4. Notifier Adapter Settings (smtp and queue)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Notifier Adapter Settings (smtp and queue)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-smtp-smtp" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 SMTP (smtp)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-email-queue-queue" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Email Queue (queue)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-redis-settings-redis" class="md-nav__link">
    <span class="md-ellipsis">
      5. Redis Settings (redis)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-authentication-settings-auth" class="md-nav__link">
    <span class="md-ellipsis">
      6. Authentication Settings (auth)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Authentication Settings (auth)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-internal-authentication-internal" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Internal Authentication (internal)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-external-authentication-external" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 External Authentication (external)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-api-settings-api" class="md-nav__link">
    <span class="md-ellipsis">
      7. API Settings (api)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. API Settings (api)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-service-settings" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Service Settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-logging-settings-logging" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Logging Settings (logging)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-tls-settings-tls" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 TLS Settings (tls)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-route-configurations-routes" class="md-nav__link">
    <span class="md-ellipsis">
      7.4 Route Configurations (routes)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../downstream-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Downstream APIs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy-locally/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy in Docker Compose
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy-k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy in Kubernetes with Helm
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Webhooks
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-vault-configurations-vault-highly-recommended-for-production-environments" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vault Configurations (vault): Highly recommended for production environments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-core-configurations-core" class="md-nav__link">
    <span class="md-ellipsis">
      2. Core Configurations (core)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Core Configurations (core)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-account-lifecycle-accountlifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Account Lifecycle (accountLifeCycle)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-webhook-webhook" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Webhook (webhook)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-sql-database-adapter-settings-diesel" class="md-nav__link">
    <span class="md-ellipsis">
      3. SQL Database Adapter Settings (diesel)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-notifier-adapter-settings-smtp-and-queue" class="md-nav__link">
    <span class="md-ellipsis">
      4. Notifier Adapter Settings (smtp and queue)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Notifier Adapter Settings (smtp and queue)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-smtp-smtp" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 SMTP (smtp)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-email-queue-queue" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Email Queue (queue)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-redis-settings-redis" class="md-nav__link">
    <span class="md-ellipsis">
      5. Redis Settings (redis)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-authentication-settings-auth" class="md-nav__link">
    <span class="md-ellipsis">
      6. Authentication Settings (auth)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Authentication Settings (auth)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-internal-authentication-internal" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Internal Authentication (internal)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-external-authentication-external" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 External Authentication (external)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-api-settings-api" class="md-nav__link">
    <span class="md-ellipsis">
      7. API Settings (api)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. API Settings (api)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-service-settings" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Service Settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-logging-settings-logging" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Logging Settings (logging)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-tls-settings-tls" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 TLS Settings (tls)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-route-configurations-routes" class="md-nav__link">
    <span class="md-ellipsis">
      7.4 Route Configurations (routes)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mycelium-api-gateway-configuration-guide">Mycelium API Gateway Configuration Guide<a class="headerlink" href="#mycelium-api-gateway-configuration-guide" title="Permanent link">&para;</a></h1>
<p>This document describes the configurations of the YAML file used to set up the
server. An example file can be found in the
<a href="../examples/config.example.yaml"><code>config.example.yaml</code></a> file.</p>
<blockquote>
<p><strong>ðŸ”’ KEEP SAFE</strong></p>
<p>Mycelium provides three different ways to configure the execution environment:</p>
<ol>
<li>Directly in the YAML file (for development purposes).</li>
<li>Environment variables (for production purposes but storing secrets as
   environment variables).</li>
<li>Externally in a Vault server (for production purposes, highly recommended
   because the secrets are not exposed as environment variables).</li>
</ol>
<p>All of the three options are valid and can be used for any configuration, but
we recommended users to use the Vault server to store the secrets in
production environments.</p>
<p>Example:</p>
<p>Using directly in the YAML file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">tokenSecret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-secret&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Using environment variables:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">tokenSecret</span><span class="p">:</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MYC_TOKEN_SECRET</span>
</code></pre></div></td></tr></table></div>
<p>Using Vault:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">tokenSecret</span><span class="p">:</span>
<span class="w">  </span><span class="nt">vault</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myc/core/accountLifeCycle</span>
<span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tokenSecret</span>
</code></pre></div></td></tr></table></div>
<p>Mycelium will try to resolve the variables at runtime, so it is not necessary
to restart the API Gateway after changing the configuration.</p>
</blockquote>
<p>In the next sections, we will describe the configurations options used to start
the API Gateway.</p>
<h2 id="1-vault-configurations-vault-highly-recommended-for-production-environments">1. Vault Configurations (<code>vault</code>): Highly recommended for production environments<a class="headerlink" href="#1-vault-configurations-vault-highly-recommended-for-production-environments" title="Permanent link">&para;</a></h2>
<p>If users opt to use the Vault server to store the secrets, they should configure
the following options:</p>
<ul>
<li><strong><code>url</code></strong>: The URL of the Vault server. Should include the protocol, hostname,
  and port number if necessary.</li>
<li><strong><code>versionWithNamespace</code></strong>: The API version used to interact with the Vault
  server. Example: <code>v1/kv</code>.</li>
<li><strong><code>token</code></strong>: The token used to authenticate with the Vault server. For obvious
  reasons, this configuration should be performed using direct definition in the
  YAML file (development) or environment variables (production).</li>
</ul>
<h2 id="2-core-configurations-core">2. Core Configurations (<code>core</code>)<a class="headerlink" href="#2-core-configurations-core" title="Permanent link">&para;</a></h2>
<p>Here resides the core configurations of the API Gateway. Configs defined here
should be used to configure the basic application lifecycle and webhooks.</p>
<h3 id="21-account-lifecycle-accountlifecycle">2.1 Account Lifecycle (<code>accountLifeCycle</code>)<a class="headerlink" href="#21-account-lifecycle-accountlifecycle" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>domainName</code></strong>: The human friendly name of the domain. Usually this is the
  frontend domain name. Example: <code>Mycelium</code>.</li>
<li><strong><code>domainUrl</code></strong>: The URL of the domain. Example: <code>https://mycelium.com</code>.</li>
<li><strong><code>tokenExpiration</code></strong>: Token expiration time (in seconds).</li>
<li><strong><code>noreplyName</code> / <code>noreplyEmail</code></strong>: Name and email for automatic messages.</li>
<li><strong><code>supportName</code> / <code>supportEmail</code></strong>: Name and email for support.</li>
<li><strong><code>locale</code></strong>: Default locale. Emails will be sent in this locale.</li>
<li><strong><code>tokenSecret</code></strong>: A unique secret used to encrypt JWT tokens.</li>
</ul>
<h3 id="22-webhook-webhook">2.2 Webhook (<code>webhook</code>)<a class="headerlink" href="#22-webhook-webhook" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>acceptInvalidCertificates</code></strong>: Allows self-signed certificates.</li>
<li><strong><code>consumeIntervalInSecs</code></strong>: The interval in seconds between each batch of
  webhook dispatch events.</li>
<li><strong><code>consumeBatchSize</code></strong>: The number of events processed per batch.</li>
<li><strong><code>maxAttempts</code></strong>: The maximum number of attempts to process an event.</li>
</ul>
<h2 id="3-sql-database-adapter-settings-diesel">3. SQL Database Adapter Settings (<code>diesel</code>)<a class="headerlink" href="#3-sql-database-adapter-settings-diesel" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><code>databaseUrl</code></strong>: The database URL. This is recommended to be stored in the
  Vault server.</li>
</ul>
<h2 id="4-notifier-adapter-settings-smtp-and-queue">4. Notifier Adapter Settings (<code>smtp</code> and <code>queue</code>)<a class="headerlink" href="#4-notifier-adapter-settings-smtp-and-queue" title="Permanent link">&para;</a></h2>
<h3 id="41-smtp-smtp">4.1 SMTP (<code>smtp</code>)<a class="headerlink" href="#41-smtp-smtp" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>host</code></strong>: The SMTP server.</li>
<li><strong><code>username</code> / <code>password</code></strong>: Smtp credentials.</li>
</ul>
<h3 id="42-email-queue-queue">4.2 Email Queue (<code>queue</code>)<a class="headerlink" href="#42-email-queue-queue" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>emailQueueName</code></strong>: The name of the email queue.</li>
<li><strong><code>consumeIntervalInSecs</code></strong>: The interval in seconds between each batch of
  email dispatch events.</li>
</ul>
<h2 id="5-redis-settings-redis">5. Redis Settings (<code>redis</code>)<a class="headerlink" href="#5-redis-settings-redis" title="Permanent link">&para;</a></h2>
<p>Redis is used to store cache and session data.</p>
<ul>
<li><strong><code>protocol</code></strong>: The protocol used to connect to the Redis server.</li>
<li><strong><code>hostname</code></strong>: The address of the Redis server.</li>
<li><strong><code>password</code></strong>: The password used to connect to the Redis server.</li>
</ul>
<h2 id="6-authentication-settings-auth">6. Authentication Settings (<code>auth</code>)<a class="headerlink" href="#6-authentication-settings-auth" title="Permanent link">&para;</a></h2>
<p>Mycelium provides a flexible authentication system that allows users to
configure internal and external authentication providers. Internal
authentication is the default authentication provider and is used to
authenticate users against the Mycelium database. External authentication is
used to authenticate users against any external provider that supports OAuth
2.0.</p>
<h3 id="61-internal-authentication-internal">6.1 Internal Authentication (<code>internal</code>)<a class="headerlink" href="#61-internal-authentication-internal" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>jwtSecret</code></strong>: A unique secret used to encrypt JWT tokens.</li>
<li><strong><code>jwtExpiresIn</code></strong>: JWT expiration time.</li>
<li><strong><code>tmpExpiresIn</code></strong>: Temporary token expiration time. This is used to generate
  temporary tokens that are used during password reset and account creation
  processes.</li>
</ul>
<h3 id="62-external-authentication-external">6.2 External Authentication (<code>external</code>)<a class="headerlink" href="#62-external-authentication-external" title="Permanent link">&para;</a></h3>
<p>Here you can configure any external provider that supports OAuth 2.0. See
example in <a href="../examples/config.example.yaml"><code>config.example.yaml</code></a>.</p>
<ul>
<li><strong><code>issuer</code></strong>: The issuer of the OAuth 2.0 provider. This is a URL that
  identifies the provider.</li>
<li><strong><code>jwksUri</code></strong>: The URI of the JWKS endpoint. This is a URL that points to the
  JWKS (JSON Web Key Set) endpoint of the provider.</li>
<li><strong><code>userInfoUrl</code></strong>: The URI of the user info endpoint. This is a URL that
  points to the user info endpoint of the provider.</li>
<li><strong><code>audience</code></strong>: The audience of the OAuth 2.0 provider. This is a string that
  identifies the API that the provider is used for.</li>
</ul>
<h2 id="7-api-settings-api">7. API Settings (<code>api</code>)<a class="headerlink" href="#7-api-settings-api" title="Permanent link">&para;</a></h2>
<h3 id="71-service-settings">7.1 Service Settings<a class="headerlink" href="#71-service-settings" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>serviceIp</code></strong>: Service IP address. Usually <code>0.0.0.0</code>.</li>
<li><strong><code>servicePort</code></strong>: Service port. Usually <code>8080</code>.</li>
<li><strong><code>serviceWorkers</code></strong>: Number of workers. Usually <code>4</code>.</li>
<li><strong><code>gatewayTimeout</code></strong>: Gateway timeout. Usually <code>30</code> seconds.</li>
<li><strong><code>allowedOrigins</code></strong>: List of allowed origins. Usually <code>*</code>.</li>
<li><strong><code>healthCheckInterval</code></strong>: Health check interval. Usually <code>120</code> seconds.</li>
<li><strong><code>maxRetryCount</code></strong>: Maximum retry count. Usually <code>3</code>.</li>
<li><strong><code>cache</code></strong>: Cache settings. See below for more details.</li>
<li><strong><code>cache.jwksTtl</code></strong>: JWKS cache TTL. Usually <code>3600</code> seconds.</li>
<li><strong><code>cache.emailTtl</code></strong>: Email cache TTL. Usually <code>120</code> seconds.</li>
<li><strong><code>cache.profileTtl</code></strong>: Profile cache TTL. Usually <code>120</code> seconds.</li>
<li><strong><code>allowedOrigins</code></strong>: List of allowed origins. Usually <code>*</code> for development
  purposes.</li>
</ul>
<h3 id="72-logging-settings-logging">7.2 Logging Settings (<code>logging</code>)<a class="headerlink" href="#72-logging-settings-logging" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>level</code></strong>: Log level for each module. See examples in
  <a href="../examples/config.example.yaml"><code>config.example.yaml</code></a>. Values can be defined
  globally or individually for each module.</li>
<li><strong><code>format</code></strong>: Log format (jsonl/ansi).</li>
<li><strong><code>target</code></strong>: Log destination (stdout/file/collector). See examples in
  <a href="../examples/config.example.yaml"><code>config.example.yaml</code></a>.</li>
</ul>
<h3 id="73-tls-settings-tls">7.3 TLS Settings (<code>tls</code>)<a class="headerlink" href="#73-tls-settings-tls" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>tlsCert</code></strong> / <strong><code>tlsKey</code></strong>: TLS certificates. If stored in Vault, store the
  raw values as strings.</li>
</ul>
<h3 id="74-route-configurations-routes">7.4 Route Configurations (<code>routes</code>)<a class="headerlink" href="#74-route-configurations-routes" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>routes</code></strong>: The file system path to the routes configuration file. See
  <a href="../downstream-apis/"><code>Routes Configuration</code></a> for more details.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/LepistaBioinformatics/mycelium" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>