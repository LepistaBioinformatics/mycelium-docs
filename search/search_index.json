{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83d\ude80 Mycelium: The Ultimate API Gateway","text":"<p>Welcome to Mycelium API Gateway, the ultimate solution for secure, flexible, and multi-tenant API management! Whether you're building a robust platform or enhancing your downstream APIs, our gateway is designed to provide you with everything you need for seamless authentication, authorization, and security. \ud83c\udf89</p>"},{"location":"#key-features","title":"\ud83c\udf1f Key Features","text":""},{"location":"#authentication-authorization","title":"\ud83d\udd12 Authentication &amp; Authorization","text":"<ul> <li>Federated Identity Support: Integrate with external identity providers   while maintaining full control over roles and permissions.</li> <li>Role-Based Access Control (RBAC): Define granular roles for both the   gateway and downstream APIs using simple YAML configurations.</li> <li>Two-Factor Authentication (2FA): Built-in support for TOTP to ensure an   extra layer of security.</li> </ul>"},{"location":"#multi-tenant-architecture","title":"\ud83c\udfe2 Multi-Tenant Architecture","text":"<ul> <li>Tenant Management: Create and manage tenants with subscription-based   accounts.</li> <li>Role Assignment: Invite users to join tenants and assign them specific   roles to streamline collaboration.</li> </ul>"},{"location":"#secure-secrets-management","title":"\ud83d\udd11 Secure Secrets Management","text":"<ul> <li>Vault Integration: Leverage HashiCorp Vault for secure storage of secrets.</li> <li>Flexible Configurations: Use secrets stored in Vault, environment   variables, or define them in YAML.</li> <li>Dynamic Secret Injection: Automate secure secret delivery to downstream   APIs.</li> </ul>"},{"location":"#api-routing-webhooks","title":"\ud83c\udf10 API Routing &amp; Webhooks","text":"<ul> <li>Smart API Routing: Easily configure API routes with support for secure   token-based authentication.</li> <li>Webhook Support: Define webhooks with secrets for secure callbacks and   notifications.</li> </ul>"},{"location":"#yaml-driven-configuration","title":"\ud83d\udcc4 YAML-Driven Configuration","text":"<ul> <li>Simple and Intuitive: Manage all configurations (tenants, roles,   permissions, routes, and security) with easy-to-read YAML files.</li> <li>Environment Flexibility: Combine YAML definitions with environment   variables for maximum flexibility.</li> </ul>"},{"location":"#security-first-design","title":"\ud83d\udee1\ufe0f Security-First Design","text":"<ul> <li>Downstream Security: Automatically pass role-based security credentials to   downstream APIs.</li> <li>Token Management: Store and securely pass tokens in request headers.</li> <li>Compliance Ready: Designed with modern security practices to meet   enterprise compliance requirements.</li> </ul>"},{"location":"#why-choose-mycelium-api-gateway","title":"\ud83c\udfaf Why Choose Mycelium API Gateway?","text":"<ol> <li>Community-Driven and Open Source: Leverage a growing community while    benefiting from an open-source model.</li> <li>Scalable and Modular: Designed to grow with your needs, from startups to    enterprise-scale applications.</li> <li>Developer-Friendly: YAML-based configurations, secure secret management,    and role-based policies make it easy to get started.</li> </ol>"},{"location":"#getting-started","title":"\ud83d\ude80 Getting Started","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<ul> <li>Postgres (Database for tenant and user management)</li> <li>HashiCorp Vault (optional but recommended for secret management in   production environments)</li> <li>Redis (Caching for performance)</li> <li>Docker (optional for quick deployment)</li> </ul>"},{"location":"#join-the-community","title":"\ud83d\udcac Join the Community","text":"<ul> <li>GitHub Issues for   feedback and feature requests</li> </ul>"},{"location":"#star-us","title":"\ud83c\udf1f Star Us","text":"<p>If you find this project useful, please give us a \u2b50 on GitHub to support our growth and attract more contributors!</p>"},{"location":"#license","title":"License","text":"<p>Mycelium API Gateway is licensed under the Apache 2.0 License. Additional restrictions for commercial use apply under the Commons Clause.</p> <p>We can't wait to see how Mycelium API Gateway powers your next big project! \ud83d\ude80</p>"},{"location":"config/","title":"Mycelium API Gateway Configuration Guide","text":"<p>This document describes the configurations of the YAML file used to set up the server. An example file can be found in the <code>config.example.yaml</code> file.</p> <p>\ud83d\udd12 KEEP SAFE</p> <p>Mycelium provides three different ways to configure the execution environment:</p> <ol> <li>Directly in the YAML file (for development purposes).</li> <li>Environment variables (for production purposes but storing secrets as    environment variables).</li> <li>Externally in a Vault server (for production purposes, highly recommended    because the secrets are not exposed as environment variables).</li> </ol> <p>All of the three options are valid and can be used for any configuration, but we recommended users to use the Vault server to store the secrets in production environments.</p> <p>Example:</p> <p>Using directly in the YAML file:</p> <pre><code>tokenSecret: \"my-secret\"\n</code></pre> <p>Using environment variables:</p> <pre><code>tokenSecret:\n  env: MYC_TOKEN_SECRET\n</code></pre> <p>Using Vault:</p> <pre><code>tokenSecret:\n  vault:\n    path: myc/core/accountLifeCycle\n    key: tokenSecret\n</code></pre> <p>Mycelium will try to resolve the variables at runtime, so it is not necessary to restart the API Gateway after changing the configuration.</p> <p>In the next sections, we will describe the configurations options used to start the API Gateway.</p>"},{"location":"config/#1-vault-configurations-vault-highly-recommended-for-production-environments","title":"1. Vault Configurations (<code>vault</code>): Highly recommended for production environments","text":"<p>If users opt to use the Vault server to store the secrets, they should configure the following options:</p> <ul> <li><code>url</code>: The URL of the Vault server. Should include the protocol, hostname,   and port number if necessary.</li> <li><code>versionWithNamespace</code>: The API version used to interact with the Vault   server. Example: <code>v1/kv</code>.</li> <li><code>token</code>: The token used to authenticate with the Vault server. For obvious   reasons, this configuration should be performed using direct definition in the   YAML file (development) or environment variables (production).</li> </ul>"},{"location":"config/#2-core-configurations-core","title":"2. Core Configurations (<code>core</code>)","text":"<p>Here resides the core configurations of the API Gateway. Configs defined here should be used to configure the basic application lifecycle and webhooks.</p>"},{"location":"config/#21-account-lifecycle-accountlifecycle","title":"2.1 Account Lifecycle (<code>accountLifeCycle</code>)","text":"<ul> <li><code>domainName</code>: The human friendly name of the domain. Usually this is the   frontend domain name. Example: <code>Mycelium</code>.</li> <li><code>domainUrl</code>: The URL of the domain. Example: <code>https://mycelium.com</code>.</li> <li><code>tokenExpiration</code>: Token expiration time (in seconds).</li> <li><code>noreplyName</code> / <code>noreplyEmail</code>: Name and email for automatic messages.</li> <li><code>supportName</code> / <code>supportEmail</code>: Name and email for support.</li> <li><code>locale</code>: Default locale. Emails will be sent in this locale.</li> <li><code>tokenSecret</code>: A unique secret used to encrypt JWT tokens.</li> </ul>"},{"location":"config/#22-webhook-webhook","title":"2.2 Webhook (<code>webhook</code>)","text":"<ul> <li><code>acceptInvalidCertificates</code>: Allows self-signed certificates.</li> <li><code>consumeIntervalInSecs</code>: The interval in seconds between each batch of   webhook dispatch events.</li> <li><code>consumeBatchSize</code>: The number of events processed per batch.</li> <li><code>maxAttempts</code>: The maximum number of attempts to process an event.</li> </ul>"},{"location":"config/#3-sql-database-adapter-settings-diesel","title":"3. SQL Database Adapter Settings (<code>diesel</code>)","text":"<ul> <li><code>databaseUrl</code>: The database URL. This is recommended to be stored in the   Vault server.</li> </ul>"},{"location":"config/#4-notifier-adapter-settings-smtp-and-queue","title":"4. Notifier Adapter Settings (<code>smtp</code> and <code>queue</code>)","text":""},{"location":"config/#41-smtp-smtp","title":"4.1 SMTP (<code>smtp</code>)","text":"<ul> <li><code>host</code>: The SMTP server.</li> <li><code>username</code> / <code>password</code>: Smtp credentials.</li> </ul>"},{"location":"config/#42-email-queue-queue","title":"4.2 Email Queue (<code>queue</code>)","text":"<ul> <li><code>emailQueueName</code>: The name of the email queue.</li> <li><code>consumeIntervalInSecs</code>: The interval in seconds between each batch of   email dispatch events.</li> </ul>"},{"location":"config/#5-redis-settings-redis","title":"5. Redis Settings (<code>redis</code>)","text":"<p>Redis is used to store cache and session data.</p> <ul> <li><code>protocol</code>: The protocol used to connect to the Redis server.</li> <li><code>hostname</code>: The address of the Redis server.</li> <li><code>password</code>: The password used to connect to the Redis server.</li> </ul>"},{"location":"config/#6-authentication-settings-auth","title":"6. Authentication Settings (<code>auth</code>)","text":"<p>Mycelium provides a flexible authentication system that allows users to configure internal and external authentication providers. Internal authentication is the default authentication provider and is used to authenticate users against the Mycelium database. External authentication is used to authenticate users against any external provider that supports OAuth 2.0.</p>"},{"location":"config/#61-internal-authentication-internal","title":"6.1 Internal Authentication (<code>internal</code>)","text":"<ul> <li><code>jwtSecret</code>: A unique secret used to encrypt JWT tokens.</li> <li><code>jwtExpiresIn</code>: JWT expiration time.</li> <li><code>tmpExpiresIn</code>: Temporary token expiration time. This is used to generate   temporary tokens that are used during password reset and account creation   processes.</li> </ul>"},{"location":"config/#62-external-authentication-external","title":"6.2 External Authentication (<code>external</code>)","text":"<p>Here you can configure any external provider that supports OAuth 2.0. See example in <code>config.example.yaml</code>.</p> <ul> <li><code>issuer</code>: The issuer of the OAuth 2.0 provider. This is a URL that   identifies the provider.</li> <li><code>jwksUri</code>: The URI of the JWKS endpoint. This is a URL that points to the   JWKS (JSON Web Key Set) endpoint of the provider.</li> <li><code>userInfoUrl</code>: The URI of the user info endpoint. This is a URL that   points to the user info endpoint of the provider.</li> <li><code>audience</code>: The audience of the OAuth 2.0 provider. This is a string that   identifies the API that the provider is used for.</li> </ul>"},{"location":"config/#7-api-settings-api","title":"7. API Settings (<code>api</code>)","text":""},{"location":"config/#71-service-settings","title":"7.1 Service Settings","text":"<ul> <li><code>serviceIp</code>: Service IP address. Usually <code>0.0.0.0</code>.</li> <li><code>servicePort</code>: Service port. Usually <code>8080</code>.</li> <li><code>serviceWorkers</code>: Number of workers. Usually <code>4</code>.</li> <li><code>gatewayTimeout</code>: Gateway timeout. Usually <code>30</code> seconds.</li> <li><code>allowedOrigins</code>: List of allowed origins. Usually <code>*</code>.</li> <li><code>healthCheckInterval</code>: Health check interval. Usually <code>120</code> seconds.</li> <li><code>maxRetryCount</code>: Maximum retry count. Usually <code>3</code>.</li> <li><code>cache</code>: Cache settings. See below for more details.</li> <li><code>cache.jwksTtl</code>: JWKS cache TTL. Usually <code>3600</code> seconds.</li> <li><code>cache.emailTtl</code>: Email cache TTL. Usually <code>120</code> seconds.</li> <li><code>cache.profileTtl</code>: Profile cache TTL. Usually <code>120</code> seconds.</li> <li><code>allowedOrigins</code>: List of allowed origins. Usually <code>*</code> for development   purposes.</li> </ul>"},{"location":"config/#72-logging-settings-logging","title":"7.2 Logging Settings (<code>logging</code>)","text":"<ul> <li><code>level</code>: Log level for each module. See examples in   <code>config.example.yaml</code>. Values can be defined   globally or individually for each module.</li> <li><code>format</code>: Log format (jsonl/ansi).</li> <li><code>target</code>: Log destination (stdout/file/collector). See examples in   <code>config.example.yaml</code>.</li> </ul>"},{"location":"config/#73-tls-settings-tls","title":"7.3 TLS Settings (<code>tls</code>)","text":"<ul> <li><code>tlsCert</code> / <code>tlsKey</code>: TLS certificates. If stored in Vault, store the   raw values as strings.</li> </ul>"},{"location":"config/#74-route-configurations-routes","title":"7.4 Route Configurations (<code>routes</code>)","text":"<ul> <li><code>routes</code>: The file system path to the routes configuration file. See   <code>routes.example.yaml</code> for more details.</li> </ul>"},{"location":"deploy-k8s/","title":"Deploy Mycelium API Gateway in Kubernetes with Helm","text":"<p>TODO</p>"},{"location":"deploy-locally/","title":"Deploy Mycelium API Gateway locally with docker compose","text":"<p>TODO</p>"},{"location":"endpoints/","title":"Management Endpoints","text":"<p>TODO</p>"},{"location":"install/","title":"How to install and execute Mycelium API Gateway","text":"<p>This guide will walk you through the steps to install Mycelium API Gateway on your local machine. Mycelium API Gateway package includes twelve libs and services, available in Crates.io. It should be installed using the cargo package manager.</p>"},{"location":"install/#prerequisites","title":"Prerequisites","text":"<p>Before you start, make sure you have the following installed on your machine:</p> <ul> <li>Postgres (Database for tenant and user management)</li> <li>Redis (Caching for performance)</li> <li>HashiCorp Vault (optional but recommended for secret management in   production environments)</li> <li>Docker (optional for quick deployment)</li> </ul>"},{"location":"install/#installation-using-cargo","title":"Installation using cargo","text":"<p>The simplest way to install Mycelium API Gateway is to use the <code>cargo</code> package manager.</p> <pre><code>cargo install mycelium-api\n</code></pre> <p>Once installed, the simplest way to start the API Gateway is to run the following command:</p> <pre><code>SETTINGS_PATH=settings/config.example.yaml myc-api\n</code></pre> <p>Note that the environment variable <code>SETTINGS_PATH</code> is pointing to the settings file. For details of the settings file, please refer to the settings documentation.</p>"},{"location":"install/#installation-using-docker","title":"Installation using Docker","text":"<p>The easiest way to install Mycelium API Gateway is to use the Docker image.</p> <pre><code>docker pull sgelias/mycelium-api:latest\n</code></pre>"},{"location":"install/#initialize-postgres-database","title":"Initialize Postgres Database","text":"<p>Mycelium API Gateway uses Postgres as the main datastore. Thus, the first step to start the API Gateway is to initialize the Postgres database. To do this, first guarantee that you have a Postgres instance running. Then, you can use the <code>postgres/sql/up.sql</code> script to initialize the database using the following command with the <code>psql</code> utility's with the <code>-v</code> option to pass the database password:</p> <pre><code>psql postgres://postgres:postgres@localhost:5432/postgres \\ \n  -f postgres/sql/up.sql \\ \n  -v db_password='REPLACE_ME'\n</code></pre> <p>Replace the connection string with your own Postgres connection string. Note the <code>postgres</code> database is used to initialize the connection, however the script itself creates an alternative database named <code>mycelium-v7-dev</code> as default.</p> <p>The database name is configurable using the <code>db_name</code> variable in the <code>up.sql</code> script. Example:</p> <pre><code>psql postgres://postgres:postgres@localhost:5432/postgres \\ \n  -f postgres/sql/up.sql \\ \n  -v db_name='my-mycelium-database' \\ \n  -v db_password='REPLACE_ME'\n</code></pre> <p>Additional arguments customizations should be done in the <code>up.sql</code> script to set the <code>db_user</code> and <code>db_role</code> variables. Default values are <code>mycelium-v7-user</code> and <code>service-role-mycelium-v7</code> respectively.</p>"},{"location":"install/#initialize-vault","title":"Initialize Vault","text":"<p>Vault is optional but recommended for secret management in production environments. To initialize Vault, use the standard Vault CLI commands to init and unseal the Vault.</p> <pre><code>vault operator init\n</code></pre> <p>As output, you will get the root token and the keys to unseal the Vault.</p> <pre><code>Unseal Key 1: REPLACE_ME\nUnseal Key 2: REPLACE_ME\nUnseal Key 3: REPLACE_ME\nUnseal Key 4: REPLACE_ME\nUnseal Key 5: REPLACE_ME\n\nInitial Root Token: REPLACE_ME\n</code></pre> <p>Once the Vault is initialized, you can unseal it using the following command:</p> <pre><code>vault operator unseal\n</code></pre> <p>For more information on how to use Vault, please refer to the official Vault documentation.</p> <p>Lets code and be happy!</p>"},{"location":"intro/","title":"Introduction","text":"<p>TODO</p>"},{"location":"routes/","title":"Configure routes","text":"<p>TODO</p>"}]}